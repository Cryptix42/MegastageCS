.define _id_a 0x
.define _id_b 0x
: _index dat 0xffff
:  dat 0xffff

:_select;Param A. "selects" a clock for the clock functions to interact with.
set push, a
set push, b
set push, c
set push, i
set push, j
set push, x
set push, y
set push, z
set push, ex
set [ _index], a
hwn i
sub i, 1
set j, 0xffff
set z, a
: _search_loop
add j, 1
hwq j
ife a,  _id_a
ife b,  _id_b
sub z, 1
ife j, i
ifn z, 0xffff
jsr error_no_such_device
ife j, i
ifn z, 0xffff
set pc,  _search_loop_brk
ife z, 0xffff
set [ ], j
ifn z, 0xffff
set pc,  _search_loop
: _search_loop_brk
set ex, pop
set z, pop
set y, pop
set x, pop
set j, pop
set i, pop
set c, pop
set b, pop
set a, pop
set pc, pop

: _amount
set push, b
set push, c
set push, i
set push, j
set push, x
set push, y
set push, z
set push, ex
hwn i
sub i, 1
set j, 0xffff
set z, 0
: _search_loop2
add j, 1
hwq j
ife a,  _id_a
ife b,  _id_b
add z, 1
ifn j, i
set pc,  _search_loop2
set a, z
set ex, pop
set z, pop
set y, pop
set x, pop
set j, pop

:
set push, a
set a, 
hwi [ ]
set a, pop
set pc, pop